# 카카오 비즈메시지 업로드 API v1.0.0

1. [개요](#1-개요)
2. [API 스펙](#2-API-스펙)
3. [코드 정의](#3-코드-정의)


## 참고 : 변경사항

| 일시       | 변경 내역                                                                                                                                                                                                                |
| ---------- | -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 2022.10.    | 카카오 비즈메시지 업로드 API 초안 작성                 

## 1. 개요
+ 업로드 API는 루나소프트에 등록된 고객사에 대해 허용된 IP로 접근할 수 있는 제한적으로 오픈된 서비스를 제공한다.
+ 본 문서는 https 프로토콜을 통해 데이터를 multipart/form-data 형식으로 가공하여 POST method를 사용하여 전송하고, json형식의 결과 데이터를 parsing하여 처리할 수 있음을 전제로 작성되었다.
+ 루나소프트 운영 담당자를 통해 요청 시 필요한 `AgentKey`를 발급 받아야 한다. (요청 시 header에 추가)

## 2. API 스펙

### 2.1 Host
> ####**[개발서버]** `https://test-kakao-bizcenter.lunasoft.co.kr/`

> ####**[운영서버]**  `https://kakao-bizcenter.lunasoft.co.kr/`


### 2.2 알림톡 템플릿 등록용 이미지 업로드 요청
+ 강조유형이 이미지형 또는 아이템리스트형인 알림톡 템플릿 등록 시 사용될 이미지를 업로드 합니다.
+ 제한 사이즈 - 가로 500px 이상, 가로:세로 비율 2:1
+ 파일형식 및 크기 : jpg, png / 최대 500KB

**POST** /api/v1/image/alimtalk/template

##### [Header]
| 키          | 타입  | 필수  | 설명 |
| ----------- | ---- | --- | --- |
| agentKey    | text | Y   | `사전에 루나소프트 운영 담당자를 통해 전달 받은 AgentKey` |

##### [Request]
| 키 | 타입 | 필수 | 설명 |
| -------- | -------- | -------- | -------- |
| image | binary | Y | 업로드할 이미지 파일 |

##### [Response]
응답 바디는 JSON객체로 아래 값을 참고 해주세요.
| 키 | 타입 | 설명 |
| -------- | -------- | -------- |
| code | text | 결과 코드 **[<3. 코드 정의 에서 확인 가능>](#3-코드-정의)** |
| image | text | 업로드된 이미지 url |


### 2.3 알림톡 이미지 업로드 요청
+ 이미지 알림톡 또는 아이템리스트 알림톡 발송 시 사용될 이미지를 업로드 합니다.
+ 제한 사이즈 - 가로 500px 이상, 가로:세로 비율 2:1 이상 3:4 이하
+ 파일형식 및 크기 : jpg, png / 최대 500KB

**POST** /api/v1/image/alimtalk

##### [Header]
| 키          | 타입  | 필수  | 설명 |
| ----------- | ---- | --- | --- |
| agentKey    | text | Y   | `사전에 루나소프트 운영 담당자를 통해 전달 받은 AgentKey` |

##### [Request]
| 키 | 타입 | 필수 | 설명 |
| -------- | -------- | -------- | -------- |
| image | binary | Y | 업로드할 이미지 파일 |

##### [Response]
응답 바디는 JSON객체로 아래 값을 참고 해주세요.
| 키 | 타입 | 설명 |
| -------- | -------- | -------- |
| code | text | 결과 코드 **[<3. 코드 정의 에서 확인 가능>](#3-코드-정의)** |
| image | text | 업로드된 이미지 url |


### 2.4 알림톡 하이라이트 이미지 업로드 요청
+ 아이템리스트 알림톡 발송 시 사용될 아이템 하이라이트 이미지를 업로드 합니다.
+ 제한 사이즈 - 가로 108px 이상, 가로:세로 비율이 1:1
+ 파일형식 및 크기 : jpg, png / 최대 500KB

**POST** /api/v1/image/alimtalk/itemHighlight

##### [Header]
| 키          | 타입  | 필수  | 설명 |
| ----------- | ---- | --- | --- |
| agentKey    | text | Y   | `사전에 루나소프트 운영 담당자를 통해 전달 받은 AgentKey` |

##### [Request]
| 키 | 타입 | 필수 | 설명 |
| -------- | -------- | -------- | -------- |
| image | binary | Y | 업로드할 이미지 파일 |

##### [Response]
응답 바디는 JSON객체로 아래 값을 참고 해주세요.
| 키 | 타입 | 설명 |
| -------- | -------- | -------- |
| code | text | 결과 코드 **[<3. 코드 정의 에서 확인 가능>](#3-코드-정의)**|
| image | text | 업로드된 이미지 url |


## 3. 코드 정의
| code | message | 설명 |
| -------- | --------  |--------  |
| 0000 | -  | 요청 성공 |
| 1002 | InvalidHubPartnerKey | 허브 파트너 키가 유효하지 않음 |
| 1004 | MissingRequiredParameterException | 필수 파라미터가 없음 |
| 2001 | InvalidImageLengthException | 이미지 용량 초과 |
| 2002 | InvalidImageShapeException | 발송할 수 없는 이미지 사이즈 |
| 2003 | InvalidImageFormatException | 지원하지 않는 이미지 형식 |
| 2004 | FailedToUploadImageException | 내부 시스템 오류로 업로드 실패 |
